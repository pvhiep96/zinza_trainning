.container
	.row
		-# = search_form_for @search, class: "col-md-12" do |f|
		-# 	.form-group.col-md-2
		-# 		= f.text_field :name_cont, placeholder: "enter name", class: "form-control"
		-# 	.form-group.col-md2
		-# 		= f.submit "search", class: "btn btn-primary"
		= search_form_for @search, class: "col-md-12" do |f|
			= f.condition_fields do |c|
				.field
					= c.attribute_fields do |a|
						= a.attribute_select associations: [:category]
					= c.predicate_select
					= c.value_fields do |v|
						= v.text_field :value
			.actions= f.submit "Search", class: "btn btn-primary"
		%h1= t("create_product")
		%br/
		%br/
		- if can? :new, @product_path
			= link_to t("create_product"), new_product_path, class: 'btn btn-primary'
		
		%table.table.table-striped
			%thead
				%tr
					%th= "category"
					%th= sort_link @search, :name, "Product name"
					%th= sort_link @search, :price, "Price"
					%th= t("description")
					%th= sort_link @search, :quantity, "Quantity"
					%th{:colspan => "3"}
			%tbody
				- @products.each do |product|
					%tr
						%td= product.category.name
						%td= product.name
						%td= product.price
						%td= product.description
						%td
							- if product.quantity == nil
								0
							- else 
								= product.quantity
						%td
							%span.glyphicon.glyphicon-eye-open{"aria-hidden" => true}
							%span.glyphicon-class= link_to t('show'), product
						%td
							- if can? :update, product
								%span.glyphicon.glyphicon-pencil{"aria-hidden" => true}
								%span.glyphicon-class= link_to t('edit'), edit_product_path(product)
						%td
							- if can? :destroy, product
								%span.glyphicon.glyphicon-trash{"aria-hidden" => true}
								%span.glyphicon.glyphicon-class= link_to t('destroy'), product, method: :delete, data: { confirm: 'Are you sure?'}
							.price_line
								= form_for OrderDetail.new, remote: true do |orders_details|
									= orders_details.hidden_field :name, value: product.name
									= orders_details.hidden_field :price, value: product.price
									= orders_details.hidden_field :product_id, value: product.id
									= orders_details.submit t('add_to_cart'), class: "btn btn-primary"
									%span= orders_details.number_field :quantity, value: 1, class: "form-control", min: 1
									%span.price= number_to_currency(product.price)
		= paginate @products, theme: 'twitter-bootstrap-3'			